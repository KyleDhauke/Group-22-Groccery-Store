{% extends "layout.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static',filename='Stylesheets/product.css') }}">
<div class="product">
  <div class="rightmenu">
    <!-- TODO: Show 'Edit' button for users with admin privilages. -->
    <h2 class="price">Â£{{ '%0.2f'| format(product.basePrice|float)}}</h2>
    <!--{% if product.totalStock < 10 %}
      <p class="stockwarning">Only {{ product.totalStock }} left in stock!</p>
    {% endif %}-->
    <form name="addcartform" action = "" method="post">
      {{addcartform.csrf_token}}
      {{addcartform.product_id(value = product.id)}}
      <input type="submit" name="submit" value="Add to Basket">
      <br/>
      <label for="">Quantity:</label>
      <input type="number" name="quantity" value="1" min="1"/>
    </form>


    {% if current_user.is_authenticated and current_user.admin %}
      <form name="publish_product" class="publish_product" method="POST">
        {{ form.csrf_token }}
        <a href={{ url_for('edit_product', id=product.id) }}>Edit</a>
        <a href={{ url_for('delete_product', id=product.id) }}>Delete</a>
        {% if product.active %}
          <p class="active">Product is published and visible to customers.</p>
        {% else %}
          <p class="inactive">Product is not published and is invisible to customers.</p>
        {% endif %}
        {{ form.publishbutton }}
      </form>
    {% endif %}
  </div>

  <img class="coverimage" src="{{ url_for('static', filename='Media/ProductImages/'+ product.coverImage) }}" alt="Cover image of '{{ product.name }}'"/>

  <div class="info">
    <h2 class="name">{{ product.name }}</h2>
    <p class="description">{{ product.desc }}</p>
  </div>
</div>
{% endblock %}
